/* Some useful array functions
*  @author Yufei Liu (yufeiliu.com)
*  Released under GPL3: http://www.gnu.org/licenses/gpl.html
*/
Array.prototype.clone=function(){return this.slice(0)};Array.prototype.first=function(){if(arguments.length<1)return this[0];for(var a=[],b=0;b<arguments[0];b++)a.push(this[b]);return a};Array.prototype.last=function(){if(arguments.length<1)return this[this.length-1];for(var a=[],b=this.length-arguments[0];b<this.length;b++)a.push(this[b]);return a};Array.prototype.shuffle=function(){for(var a=this.clone(),b=0;b<this.length;b++){var c=Math.floor(Math.random()*this.length),d=Math.floor(Math.random()*this.length),g=a[c];a[c]=a[d];a[d]=g}return a};Array.prototype.sample=function(){for(var a=[],b=arguments.length<1?1:arguments[0],c=b,d=0;d<this.length;d++)if(Math.random()<=c/(this.length-d)&&a.push(this[d]),c=b-a.length,c==0)break;return a.length===1?a[0]:a};Array.prototype.getEvery=function(a){var b=[];if(a<1)return b;for(var c=a-1;c<this.length;c+=a)b.push(this[c]);return b};Array.prototype.map=function(a){for(var b=[],c=0;c<this.length;c++)b.push(a(this[c]));return b};Array.prototype.reduce=function(a,b){for(var c=b,d=0;d<this.length;d++)c=a(this[d],c);return c};Array.prototype.filter=function(a){var b=[];this.map(function(c){a(c)&&b.push(c)});return b};Array.prototype.reject=function(a){rf=function(b){return a(b)?false:true};return this.filter(rf)};Array.prototype.count=function(){if(arguments.length<1)return this.length;var a=arguments[0],b=0;this.map(function(c){typeof a==="function"&&a(c)?b++:a===c&&b++});return b};Array.prototype.sum=function(){return this.reduce(function(a,b){return a+b},0)};Array.prototype.mean=function(){return this.sum()/this.length};Array.prototype.median=function(){var a=this.clone();a.sort(function(a,b){return a-b});var b=this.length;return b%2==1?a[(b-1)/2]:(a[b/2-1]+a[b/2])/2};Array.prototype.max=function(){var a=this.clone();a.sort(function(a,c){return a-c});return a.pop()};Array.prototype.min=function(){var a=this.clone();a.sort(function(a,c){return a-c});return a.shift()};Array.prototype.stdev=function(){var a=this.mean(),b=0;this.map(function(c){b+=(c-a)*(c-a)});return Math.sqrt(b/this.length)};Array.prototype.frequencyMap=function(a){var b={},c=a;c==void 0&&(c=function(a,b){return a==b});var d=[];this.map(function(a){for(var f=null,e=0;e<d.length;e++)if(c(d[e],a)){f=d[e];break}f===null?(d.push(a),b[a]=1):b[f]+=1});return b};Array.prototype.inRange=function(a,b){return this.filter(function(c){return c>=a&&c<=b})};
